---

copyright:
  years: 2015, 2019
lastupdated: "2018-01-16"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}


# パーティションのリーダー
{: #partition_leadership }

各パーティションで、クラスター内の 1 つのサーバーがパーティションのリーダーとして動作し、その他のサーバーはフォロワーとして動作します。 パーティションのすべてのプロデュース要求およびコンシューム要求はリーダーによって処理されます。 フォロワーは、リーダーに遅れずについていくため、リーダーからパーティション・データを複製します。 フォロワーがパーティションのリーダーに遅れずについていっている場合、フォロワーのレプリカは同期しています。
{: shortdesc}

パーティション・リーダーにメッセージが送信されても、そのメッセージはすぐにコンシューマーで使用可能にはなりません。 リーダーはメッセージのレコードをパーティションに付加し、その際、そのパーティションの次のオフセット数値をそのレコードに割り当てます。 同期レプリカのためのすべてのフォロワーがそのレコードを複製し、レコードをレプリカに書き込んだことを確認応答した後、レコードは*コミット済み* になります。 そのメッセージはコンシューマーで使用可能です。

パーティションのリーダーで障害が起こると、同期レプリカを持つフォロワーのうちの 1 つが自動的にパーティションのリーダーを引き継ぎます。 実際には、どのサーバーも、いずれかのパーティションのリーダーであり、その他のパーティションのフォロワーです。 パーティションのリーダーの決定は動的であり、サーバーの追加および削除のたびに変化します。

アプリケーションはパーティションのリーダーの変更を処理するための特別な処理を行う必要はありません。 クラスターで変更が確定するまでの間は待ち時間が増えますが、Kafka クライアント・ライブラリーは自動的に新しいリーダーに再接続します。
